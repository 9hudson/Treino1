<!DOCTYPE html>
<html lang="pt-BR">
<head>
 <meta charset="UTF-8" />
 <title>Track de Treinos — 8 Semanas</title>
 <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <style>
 * {
 box-sizing: border-box;
 }
 body {
 margin: 0;
 font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
 background: #0f172a;
 color: #e5e7eb;
 }
 .app-container {
 max-width: 900px;
 margin: 0 auto;
 padding: 1rem;
 padding-bottom: 5rem; /* espaço pro menu inferior */
 }
 header {
 display: flex;
 flex-direction: column;
 gap: 0.25rem;
 margin-bottom: 1rem;
 }
 header h1 {
 font-size: 1.25rem;
 margin: 0;
 }
 header p {
 margin: 0;
 font-size: 0.85rem;
 color: #9ca3af;
 }
 .card {
 background: #020617;
 border-radius: 0.75rem;
 padding: 1rem;
 box-shadow: 0 10px 30px rgba(0,0,0,0.45);
 margin-bottom: 1rem;
 border: 1px solid #1f2937;
 }
 .card-title {
 font-weight: 600;
 margin-bottom: 0.5rem;
 display: flex;
 align-items: center;
 justify-content: space-between;
 gap: 0.5rem;
 }
 .card-subtitle {
 font-size: 0.8rem;
 color: #9ca3af;
 margin-bottom: 0.5rem;
 }
 label {
 font-size: 0.8rem;
 display: block;
 margin-bottom: 0.2rem;
 color: #d1d5db;
 }
 input, select, button {
 font-family: inherit;
 font-size: 0.9rem;
 }
 input[type="date"],
 select,
 .input-inline {
 width: 100%;
 padding: 0.5rem 0.7rem;
 border-radius: 0.5rem;
 border: 1px solid #4b5563;
 background: #020617;
 color: #e5e7eb;
 outline: none;
 }
 input[type="number"] {
 width: 100%;
 padding: 0.3rem 0.5rem;
 border-radius: 0.5rem;
 border: 1px solid #4b5563;
 background: #020617;
 color: #e5e7eb;
 outline: none;
 }
 input:focus,
 select:focus {
 border-color: #6366f1;
 box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.4);
 }
 .row {
 display: flex;
 gap: 0.75rem;
 flex-wrap: wrap;
 margin-bottom: 0.5rem;
 }
 .row > div {
 flex: 1;
 min-width: 120px;
 }
 .exercise-card {
 border-radius: 0.75rem;
 border: 1px solid #1f2937;
 padding: 0.75rem;
 margin-bottom: 0.75rem;
 background: #020617;
 }
 .exercise-header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 margin-bottom: 0.4rem;
 gap: 0.5rem;
 }
 .exercise-header h3 {
 margin: 0;
 font-size: 0.95rem;
 font-weight: 600;
 }
 .exercise-header span {
 font-size: 0.75rem;
 color: #9ca3af;
 }
 .set-row {
 display: flex;
 gap: 0.5rem;
 margin-bottom: 0.35rem;
 }
 .set-row input {
 text-align: center;
 }
 .set-row span {
 font-size: 0.75rem;
 min-width: 1.5rem;
 display: flex;
 align-items: center;
 justify-content: center;
 color: #9ca3af;
 }
 .btn {
 border-radius: 9999px;
 border: none;
 padding: 0.5rem 0.9rem;
 font-weight: 500;
 cursor: pointer;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 gap: 0.3rem;
 transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.15s ease;
 white-space: nowrap;
 }
 .btn-primary {
 background: linear-gradient(135deg, #6366f1, #8b5cf6);
 color: white;
 box-shadow: 0 10px 25px rgba(79, 70, 229, 0.55);
 }
 .btn-secondary {
 background: #111827;
 color: #e5e7eb;
 border: 1px solid #374151;
 }
 .btn-ghost {
 background: transparent;
 color: #9ca3af;
 border: 1px dashed #4b5563;
 }
 .btn-small {
 padding: 0.25rem 0.6rem;
 font-size: 0.75rem;
 box-shadow: none;
 }
 .btn:active {
 transform: translateY(1px);
 box-shadow: none;
 }
 .btn-full {
 width: 100%;
 justify-content: center;
 }
 .chip {
 font-size: 0.7rem;
 padding: 0.15rem 0.5rem;
 border-radius: 999px;
 border: 1px solid #374151;
 color: #9ca3af;
 }
 .toast {
 position: fixed;
 bottom: 4rem;
 left: 50%;
 transform: translateX(-50%);
 background: #16a34a;
 color: white;
 padding: 0.6rem 1rem;
 border-radius: 999px;
 font-size: 0.85rem;
 box-shadow: 0 10px 25px rgba(0,0,0,0.6);
 opacity: 0;
 pointer-events: none;
 transition: opacity 0.2s ease;
 z-index: 50;
 }
 .toast.show {
 opacity: 1;
 pointer-events: auto;
 }
 .bottom-nav {
 position: fixed;
 bottom: 0;
 left: 0;
 right: 0;
 background: #020617ef;
 border-top: 1px solid #1f2937;
 display: flex;
 justify-content: space-around;
 padding: 0.4rem 0.6rem;
 backdrop-filter: blur(10px);
 z-index: 40;
 }
 .bottom-nav button {
 flex: 1;
 margin: 0 0.25rem;
 font-size: 0.78rem;
 }
 .bottom-nav button.active {
 background: linear-gradient(135deg, #6366f1, #8b5cf6);
 color: white;
 border: none;
 box-shadow: 0 8px 20px rgba(79, 70, 229, 0.6);
 }
 .section-hidden {
 display: none;
 }
 table {
 width: 100%;
 border-collapse: collapse;
 font-size: 0.8rem;
 margin-top: 0.5rem;
 }
 th, td {
 padding: 0.35rem 0.4rem;
 border-bottom: 1px solid #1f2937;
 text-align: center;
 }
 th {
 text-transform: uppercase;
 font-size: 0.7rem;
 color: #9ca3af;
 }
 .tag {
 font-size: 0.7rem;
 padding: 0.12rem 0.5rem;
 border-radius: 999px;
 background: #111827;
 border: 1px solid #1f2937;
 color: #9ca3af;
 }
 @media (min-width: 768px) {
 header h1 {
 font-size: 1.4rem;
 }
 .card {
 padding: 1.1rem 1.25rem;
 }
 }
 </style>
</head>
<body>
 <div class="app-container">
 <header>
 <h1>Track de Treinos — 8 Semanas</h1>
 <p>Acompanhe carga e repetições dos treinos A/B/C/D sem planilha.</p>
 </header>

 <!-- Seção Treino de Hoje -->
 <section id="section-today">
 <div class="card">
 <div class="card-title">
 <span>Treino de hoje</span>
 <span class="chip" id="current-phase-chip">Fase: Adaptação</span>
 </div>
 <div class="card-subtitle">Selecione a data e o treino para registrar as séries.</div>

 <div class="row">
 <div>
 <label for="date">Data</label>
 <input type="date" id="date" />
 </div>
 <div>
 <label for="workout">Treino</label>
 <select id="workout">
 <option value="A">Treino A — Peito + Ombros</option>
 <option value="B">Treino B — Pernas</option>
 <option value="C">Treino C — Costas + Posterior</option>
 <option value="D">Treino D — Bíceps + Tríceps</option>
 </select>
 </div>
 </div>

 <div class="card-subtitle">Horário padrão: 17:30–19:00 (ajuste apenas no calendário, se quiser).</div>

 <div id="exercises-container"></div>

 <button id="save-session" class="btn btn-primary btn-full" type="button">
 Salvar treino de hoje
 </button>
 </div>

 <div class="card">
 <div class="card-title">
 <span>Dica rápida</span>
 </div>
 <p style="font-size:0.8rem; color:#9ca3af; margin:0;">
 – Preencha apenas as séries que realmente realizou.<br/>
 – Use uma nova linha de série quando mudar a carga ou bater um PR.<br/>
 – O histórico fica salvo apenas neste dispositivo (localStorage).
 </p>
 </div>
 </section>

 <!-- Seção Histórico -->
 <section id="section-history" class="section-hidden">
 <div class="card">
 <div class="card-title">
 <span>Histórico por exercício</span>
 </div>
 <div class="card-subtitle">
 Veja as últimas cargas e repetições de um exercício específico.
 </div>

 <div class="row">
 <div>
 <label for="history-exercise">Exercício</label>
 <select id="history-exercise"></select>
 </div>
 </div>

 <button id="load-history" class="btn btn-secondary btn-full" type="button">
 Carregar histórico
 </button>

 <div id="history-results" style="margin-top:0.75rem;"></div>
 </div>

 <div class="card">
 <div class="card-title">
 <span>Backup manual</span>
 </div>
 <p style="font-size:0.8rem; color:#9ca3af; margin:0 0 0.5rem;">
 Você pode exportar os dados em JSON e salvar em outro lugar.
 </p>
 <button id="export-json" class="btn btn-ghost btn-full" type="button">
 Exportar dados em JSON
 </button>
 <textarea id="export-area" rows="5" style="width:100%; margin-top:0.5rem; font-size:0.75rem; background:#020617; color:#e5e7eb; border-radius:0.5rem; border:1px solid #1f2937; padding:0.4rem;"></textarea>
 </div>
 </section>
 </div>

 <!-- Navegação inferior -->
 <div class="bottom-nav">
 <button id="nav-today" class="btn btn-secondary active" type="button">Treino de hoje</button>
 <button id="nav-history" class="btn btn-secondary" type="button">Histórico</button>
 </div>

 <div id="toast" class="toast">Treino salvo!</div>

 <script>
 // Plano de exercícios conforme seu treino A/B/C/D
 const PLAN = {
 A: {
 name: "Treino A — Peito + Ombros (Push)",
 exercises: [
 "Supino reto com barra",
 "Supino inclinado com halteres",
 "Crossover (alto p/ baixo)",
 "Crucifixo inclinado na máquina",
 "Desenvolvimento militar com barra",
 "Elevação lateral com halteres",
 "Elevação frontal (barra/disco)",
 "Elevação posterior (peck-deck)"
 ]
 },
 B: {
 name: "Treino B — Pernas (Quadríceps + Posteriores)",
 exercises: [
 "Agachamento livre",
 "Leg press",
 "Cadeira extensora",
 "Agachamento búlgaro com halteres",
 "Mesa flexora",
 "Stiff com barra",
 "Panturrilha em pé"
 ]
 },
 C: {
 name: "Treino C — Costas + Posterior de Ombros (Pull)",
 exercises: [
 "Barra fixa (pegada aberta)",
 "Remada curvada com barra",
 "Puxada supinada na polia",
 "Remada unilateral com halter",
 "Pullover (máquina/cabo)",
 "Elevação posterior (peck-deck)",
 "Face pull (corda)",
 "Encolhimento com halteres"
 ]
 },
 D: {
 name: "Treino D — Bíceps + Tríceps",
 exercises: [
 "Rosca direta com barra",
 "Rosca alternada com halteres",
 "Rosca martelo",
 "Tríceps na corda",
 "Tríceps francês com halteres",
 "Mergulho entre bancos",
 "Rosca concentrada unilateral",
 "Kickback para tríceps"
 ]
 }
 };

 const PROGRAM_START = new Date("2025-11-20T00:00:00");
 const PHASE_2_START = new Date("2025-12-04T00:00:00"); // Intensificação
 const PHASE_3_START = new Date("2025-12-25T00:00:00"); // Máx. definição

 const dateInput = document.getElementById("date");
 const workoutSelect = document.getElementById("workout");
 const exercisesContainer = document.getElementById("exercises-container");
 const saveButton = document.getElementById("save-session");
 const toast = document.getElementById("toast");
 const phaseChip = document.getElementById("current-phase-chip");

 const navToday = document.getElementById("nav-today");
 const navHistory = document.getElementById("nav-history");
 const sectionToday = document.getElementById("section-today");
 const sectionHistory = document.getElementById("section-history");

 const historyExerciseSelect = document.getElementById("history-exercise");
 const historyResults = document.getElementById("history-results");
 const loadHistoryButton = document.getElementById("load-history");
 const exportButton = document.getElementById("export-json");
 const exportArea = document.getElementById("export-area");

 // --------- Utilidades ----------
 function showToast(message) {
 toast.textContent = message;
 toast.classList.add("show");
 setTimeout(() => toast.classList.remove("show"), 2000);
 }

 function getTodayISO() {
 const today = new Date();
 const off = today.getTimezoneOffset();
 const local = new Date(today.getTime() - off * 60 * 1000);
 return local.toISOString().split("T")[0];
 }

 function loadLog() {
 try {
 const raw = localStorage.getItem("workoutLog_v1");
 if (!raw) return [];
 return JSON.parse(raw);
 } catch (e) {
 console.error("Erro ao carregar log", e);
 return [];
 }
 }

 function saveLog(log) {
 localStorage.setItem("workoutLog_v1", JSON.stringify(log));
 }

 function detectPhase(dateStr) {
 const d = new Date(dateStr + "T00:00:00");
 if (d < PHASE_2_START) return "Adaptação";
 if (d < PHASE_3_START) return "Intensificação";
 return "Máxima definição";
 }

 function updatePhaseChip() {
 const dateStr = dateInput.value || getTodayISO();
 const phase = detectPhase(dateStr);
 phaseChip.textContent = "Fase: " + phase;
 }

 // --------- Renderização do treino ----------
 function createSetRow(setIndex) {
 const row = document.createElement("div");
 row.className = "set-row";

 const label = document.createElement("span");
 label.textContent = setIndex;
 row.appendChild(label);

 const weightInput = document.createElement("input");
 weightInput.type = "number";
 weightInput.min = "0";
 weightInput.step = "0.5";
 weightInput.placeholder = "kg";
 weightInput.inputMode = "decimal";

 const repsInput = document.createElement("input");
 repsInput.type = "number";
 repsInput.min = "1";
 repsInput.step = "1";
 repsInput.placeholder = "reps";
 repsInput.inputMode = "numeric";

 row.appendChild(weightInput);
 row.appendChild(repsInput);

 return row;
 }

 function renderExercises() {
 const workoutKey = workoutSelect.value;
 const plan = PLAN[workoutKey];
 exercisesContainer.innerHTML = "";

 const titleRow = document.createElement("div");
 titleRow.className = "card-subtitle";
 titleRow.textContent = plan.name;
 exercisesContainer.appendChild(titleRow);

 plan.exercises.forEach((exName, idx) => {
 const card = document.createElement("div");
 card.className = "exercise-card";
 card.dataset.exerciseName = exName;

 const header = document.createElement("div");
 header.className = "exercise-header";

 const h3 = document.createElement("h3");
 h3.textContent = exName;

 const tag = document.createElement("span");
 tag.textContent = "Ex. " + (idx + 1);
 header.appendChild(h3);
 header.appendChild(tag);
 card.appendChild(header);

 const hint = document.createElement("div");
 hint.className = "card-subtitle";
 hint.style.marginBottom = "0.35rem";
 hint.textContent = "Registre apenas as séries que de fato fez.";
 card.appendChild(hint);

 const setsContainer = document.createElement("div");
 setsContainer.className = "sets-container";

 // cria 3 séries por padrão
 for (let i = 1; i <= 3; i++) {
 setsContainer.appendChild(createSetRow(i));
 }

 card.appendChild(setsContainer);

 const btnAdd = document.createElement("button");
 btnAdd.type = "button";
 btnAdd.className = "btn btn-ghost btn-small";
 btnAdd.textContent = "+ Série";
 btnAdd.addEventListener("click", () => {
 const currentSets = setsContainer.querySelectorAll(".set-row").length;
 setsContainer.appendChild(createSetRow(currentSets + 1));
 });
 card.appendChild(btnAdd);

 exercisesContainer.appendChild(card);
 });
 }

 // --------- Salvar sessão ----------
 function handleSaveSession() {
 const dateStr = dateInput.value;
 const workoutKey = workoutSelect.value;

 if (!dateStr) {
 showToast("Escolha a data do treino.");
 return;
 }

 const plan = PLAN[workoutKey];
 const phase = detectPhase(dateStr);

 const cards = exercisesContainer.querySelectorAll(".exercise-card");
 const exercisesData = [];

 cards.forEach(card => {
 const name = card.dataset.exerciseName;
 const setRows = card.querySelectorAll(".set-row");
 const sets = [];
 setRows.forEach(row => {
 const inputs = row.querySelectorAll("input");
 const weight = inputs[0].value.trim();
 const reps = inputs[1].value.trim();
 if (weight !== "" && reps !== "") {
 sets.push({
 weight: parseFloat(weight),
 reps: parseInt(reps, 10)
 });
 }
 });
 if (sets.length > 0) {
 exercisesData.push({
 name,
 sets
 });
 }
 });

 if (exercisesData.length === 0) {
 showToast("Preencha pelo menos uma série para salvar.");
 return;
 }

 const log = loadLog();
 log.push({
 date: dateStr,
 workoutKey,
 workoutName: plan.name,
 phase,
 exercises: exercisesData,
 createdAt: new Date().toISOString()
 });
 saveLog(log);
 showToast("Treino salvo com sucesso! ");
 }

 // --------- Histórico ----------
 function populateHistoryExerciseSelect() {
 const allExercises = new Set();
 Object.values(PLAN).forEach(w => {
 w.exercises.forEach(e => allExercises.add(e));
 });

 historyExerciseSelect.innerHTML = "";
 allExercises.forEach(ex => {
 const opt = document.createElement("option");
 opt.value = ex;
 opt.textContent = ex;
 historyExerciseSelect.appendChild(opt);
 });
 }

 function handleLoadHistory() {
 const exName = historyExerciseSelect.value;
 const log = loadLog().filter(entry =>
 entry.exercises.some(ex => ex.name === exName)
 );

 if (log.length === 0) {
 historyResults.innerHTML =
 '<p style="font-size:0.8rem; color:#9ca3af;">Nenhum registro encontrado para este exercício.</p>';
 return;
 }

 log.sort((a, b) => (a.date < b.date ? 1 : -1)); // mais recentes primeiro

 const limit = 12;
 const sliced = log.slice(0, limit);

 let html = `<div class="card-subtitle" style="margin-bottom:0.3rem;">Mostrando até ${limit} sessões mais recentes.</div>`;
 html += `<table><thead><tr><th>Data</th><th>Fase</th><th>Séries (kg x reps)</th></tr></thead><tbody>`;

 sliced.forEach(entry => {
 const ex = entry.exercises.find(e => e.name === exName);
 const seriesStr = ex.sets
 .map(s => `${s.weight}×${s.reps}`)
 .join(", ");

 html += `<tr>
 <td>${entry.date}</td>
 <td>${entry.phase}</td>
 <td>${seriesStr}</td>
 </tr>`;
 });

 html += "</tbody></table>";
 historyResults.innerHTML = html;
 }

 // --------- Exportar JSON ----------
 function handleExportJSON() {
 const log = loadLog();
 const json = JSON.stringify(log, null, 2);
 exportArea.value = json;
 showToast("Dados exportados abaixo.");
 }

 // --------- Navegação ----------
 function showSection(section) {
 if (section === "today") {
 sectionToday.classList.remove("section-hidden");
 sectionHistory.classList.add("section-hidden");
 navToday.classList.add("active");
 navHistory.classList.remove("active");
 } else {
 sectionToday.classList.add("section-hidden");
 sectionHistory.classList.remove("section-hidden");
 navToday.classList.remove("active");
 navHistory.classList.add("active");
 }
 }

 // --------- Inicialização ----------
 function init() {
 dateInput.value = getTodayISO();
 updatePhaseChip();
 renderExercises();
 populateHistoryExerciseSelect();
 }

 // Eventos
 workoutSelect.addEventListener("change", renderExercises);
 dateInput.addEventListener("change", updatePhaseChip);
 saveButton.addEventListener("click", handleSaveSession);
 loadHistoryButton.addEventListener("click", handleLoadHistory);
 exportButton.addEventListener("click", handleExportJSON);
 navToday.addEventListener("click", () => showSection("today"));
 navHistory.addEventListener("click", () => showSection("history"));

 init();
 </script>
</body>

</html>
